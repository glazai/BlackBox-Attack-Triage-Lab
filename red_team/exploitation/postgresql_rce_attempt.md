# PostgreSQL RCE via COPY FROM PROGRAM – Attempted Exploitation

# Objective

Leverage PostgreSQL’s `COPY FROM PROGRAM` feature on the Metasploitable2 target to execute a reverse shell payload and gain remote access.


# Vulnerability Summary

- **Target Port:** `5432/tcp`
- **Service:** PostgreSQL 8.3.0 – 8.3.7
- **Vuln Feature:** `COPY FROM PROGRAM` (enabled by default in older PostgreSQL)
- **Exploit Module:** `exploit/multi/postgres/postgres_copy_from_program_cmd_exec`
- **MITRE Mapping:** 
  - **T1190** – Exploit Public-Facing Application
  - **T1059.004** – Command & Scripting Interpreter: Unix Shell


# Attempted Exploitation

**Metasploit Configuration:**

- `RHOSTS`: 192.168.6.3
- `RPORT`: 5432
- `USERNAME`: postgres
- `PASSWORD`: postgres
- `LHOST`: 192.168.6.4
- `LPORT`: 4460 (also tested others)
- Payloads tried:
  - `cmd/unix/reverse_netcat`
  - `cmd/unix/reverse_perl`
  - `linux/x86/meterpreter/reverse_tcp` (incompatible)


# Outcome

- Exploit runs and reports: `Exploit completed, but no session was created`
- No reverse shell received in any attempt
- No listener connection triggered on Kali box


# Troubleshooting Notes

- Verified PostgreSQL was accessible (`nc -vz 192.168.6.3 5432`)
- Confirmed credentials are correct
- Verified LHOST and LPORT settings
- Target likely lacks required binaries (`nc`, `perl`)
- Firewall or routing not the issue (host pinged successfully)


# Conclusion

Exploit attempts using Metasploit module for PostgreSQL UDF failed consistently.

Possible causes:
- Lack of `nc` or `perl` on target
- Misconfigured or limited PostgreSQL features
- Module instability

This path is documented as **unsuccessful**, but the attack surface and credentials remain valid for future manual exploitation (e.g., through `psql` with interactive SQL commands).

